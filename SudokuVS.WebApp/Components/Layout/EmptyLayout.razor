@inherits LayoutComponentBase

@Body

@inject NavigationManager Navigation;
@inject IJSRuntime JsRuntime;

@code {

    string? _name;
    IJSObjectReference? _mainLayoutModule;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!firstRender)
        {
            return;
        }

        _mainLayoutModule ??= await JsRuntime.InvokeAsync<IJSObjectReference>("import", "./Components/Layout/MainLayout.razor.js");

        _name = await _mainLayoutModule.InvokeAsync<string?>("readName");

        if (string.IsNullOrWhiteSpace(_name))
        {
            Navigation.NavigateTo("/setup");
            return;
        }

        StateHasChanged();
    }

}